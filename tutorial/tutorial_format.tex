
\def\freefont{} % 使用免费商业字体
\newcommand{\mytitleen}{Typesetting Tutorial for \LaTeX}
\newcommand{\mytitle}{\LaTeX 排版教程}
\newcommand{\myauthor}{兔子草}
\newcommand{\mycp}{}

\input{../font.tex}
\input{../formats.tex}

% 这部分设定纯为教程服务 
\usepackage{xcolor}
\definecolor{gray}{RGB}{68,71,90}
\definecolor{grayblue}{RGB}{98,144,164}
\definecolor{cyan}{RGB}{139, 233, 253}
\definecolor{green}{RGB}{80, 250, 123}
\definecolor{orange}{RGB}{255, 184, 108}
\definecolor{pink}{RGB}{255, 121, 198}
\definecolor{purple}{RGB}{189, 147, 249}
\definecolor{red}{RGB}{255, 85, 85}
\definecolor{yellow}{RGB}{241, 250, 140}
\definecolor{myblack}{RGB}{32, 34, 39}
\definecolor{darkgreen}{RGB}{31,138,35}
\hypersetup{colorlinks,linkcolor=black,urlcolor=darkgreen}
\usepackage{metalogo}
\setmonofont{Inconsolata}
\setCJKmonofont{FZHei-B01}
\usepackage{enumitem}
\usepackage{ulem}
\usepackage{listings}
\renewcommand{\lstlistingname}{代码}
\renewcommand{\lstlistlistingname}{代码}
\lstset{
    flexiblecolumns,
    numbers=left,
    numberstyle=\footnotesize\color{gray},
    frame=leftline,
    showspaces=false,
    linewidth=\linewidth,
    xleftmargin=2\ccwd,
    breaklines=true,
    columns=fixed,
    basicstyle=\small\ttfamily,
    captionpos=b,
}
\lstdefinestyle{TeX}{
    language=TeX,
    morekeywords={usepackage,begin,newcommand,renewcommand,counterwithout,setcounter,addcounter,part,chapter,section,clearpage,newpage,cleardoublepage,thepage,setlength,addtolength,newlength,ctexset,plus,minus,makeatletter,makeatother,patchcmd,@addtoreset,addcontentsline},
    emph={documentclass,document,setmainfont,newfontfamily,BoldFont,ItalicFont,setCJKmainfont,newCJKfontfamily,geometry,newgeometry,restoregeometry,titleformat,titlespacing,blankpage,singlespacing,onehalfspacing,doublespacing,setstretch,pagestyle,thispagestyle,punctstyle,roman,titlecontents,vspace,hspace,makebox,mbox,@pnumwidth,startcontents,stopcontents,printcontents,hypersetup,fancypagestyle,fancyhf,fancyhead,fancyfoot,markboth,markright,fancyhfoffset,fancyheadoffset,fancyfootoffset,includegraphics,figure,caption,captionsetup,includepdf,subfile},
    basicstyle=\small\ttfamily\color{myblack},
    identifierstyle=\color{purple},
    keywordstyle=\color{pink},
    emphstyle=\color{orange},
    stringstyle=\color{yellow},
    commentstyle=\color{grayblue},
}
\usepackage{makecell}
\newcommand{\emoji}[1]{\fontspec{Symbola}\symbol{#1}}
\newcommand{\checkmark}{
    \makebox[1\ccwd]{
        \fboxsep1.5pt
        \colorbox{green}{\emoji{"2714}}
    }
}
\usepackage{longtable}
\newenvironment{tightitem}
{\begin{itemize}[topsep=0pt,partopsep=0pt,itemsep=0pt,parsep=0pt,leftmargin=3\ccwd,labelwidth=1.5\ccwd,labelsep=.5\ccwd]}
        {\end{itemize}}

\newenvironment{tightenum}
{\begin{enumerate}[topsep=0pt,partopsep=0pt,itemsep=0pt,parsep=0pt,leftmargin=3\ccwd,labelwidth=1.5\ccwd,labelsep=.5\ccwd]}
        {\end{enumerate}}

\newcommand{\testtext}{

    发情期的Alpha小红咬住Omega小明的腺体，开始默数30秒。}
\usepackage{float}
\fancypagestyle{mystyle}{
    \fancyhf{}
    \fancyhead[CE]{\headfont\mytitle}
    \fancyhead[CO]{\headfont BY \myauthor}
    \fancyfoot[CO]{\hfill\headfont\leftmark\qquad\rule[-4pt]{0.3pt}{20pt}\hspace{1.5em}}
    \fancyfoot[RO]{\pagenumberfont\thepage}
    \fancyfoot[LE]{\pagenumberfont\thepage}
    \fancyfoot[CE]{\hspace{1.5em}\rule[-4pt]{0.3pt}{20pt}\qquad\headfont\uppercase\expandafter{\romannumeral\thechapter}\hfill}
}
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[CO]{\hfill\headfont\leftmark\qquad\rule[-4pt]{0.3pt}{20pt}\hspace{1.5em}}
    \fancyfoot[RO]{\pagenumberfont\thepage}
    \fancyfoot[LE]{\pagenumberfont\thepage}
    \fancyfoot[CE]{\hspace{1.5em}\rule[-4pt]{0.3pt}{20pt}\qquad\headfont\uppercase\expandafter{\romannumeral\thechapter}\hfill}
}

\renewcommand{\charcount}{40}
\renewcommand{\linecount}{32}

\setlength{\theight}{\linecount\baselineskip}
\addtolength{\theight}{1em}
\addtolength{\theight}{-\baselineskip}

\geometry{
    paperwidth=6.625in,
    paperheight=10.25in,
    top=\ptop,
    outer=\pouter,
    % inner=\pinner,
    % bottom=\pbottom,
    textwidth=\charcount\ccwd,
    textheight=\theight,
    headsep=\phsep,
    footskip=\pfskip,
}

\setstretch{1.3}

\titlecontents{chapter}
[6mm]
{\vspace{0.3em}\large\tocchapter}
{\makebox[10mm][l]{\normalsize\uppercase\expandafter{\romannumeral\thecontentslabel}}}
{}
{\hspace{4mm}\tocpage\large\contentspage}[\vspace{0.3em}]

\titlecontents{section}
[12mm]
{\tocsection}
{\tocsectlabel \S \hspace{0.1em}\makebox[1.2em][c]{\thecontentslabel}\hspace{1em}}{}
{\hspace{5mm}\tocpage\contentspage}[\vspace{0.1em}]

\titlecontents{subsection}
[18mm]
{\tocsubsection}
{\small\tocsubsectlabel\hspace{0.2em}\makebox[1em][c]{\thecontentslabel}\hspace{0.8em}}{}
{\hspace{7mm}\small\tocpage\contentspage}{}

\titleformat{\chapter}{\centering\Large\chapterfont}{\uppercase\expandafter{\romannumeral\thechapter}}{1em}{}
\titleformat{\section}{\sectionfont}{\S~\thesection}{1em}{}
