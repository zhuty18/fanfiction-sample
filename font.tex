\ifdefined\freefont
    \usepackage{fontspec}
    \setmainfont{EB Garamond 12 Regular}[Ligatures={Rare,Historic},Numbers=Lining]
    \newfontfamily\ssfont{Vollkorn Medium Italic}
    \newfontfamily\chenfont{Vollkorn Italic}
    \newfontfamily\pagenfont{Vollkorn Italic}
    \newfontfamily\prenotefont{EB Garamond 12 Regular}
    \newfontfamily\cpfont{Vollkorn}
    \newfontfamily\scfont{EB Garamond SmallCaps 12 Regular}

    \newfontfamily\songtien{Source Han Serif CN}
    \newfontfamily\sbsongen{Source Han Serif CN SemiBold}
    \newfontfamily\bsongen{Source Han Serif CN Bold}

    \newfontfamily\shusongen{FZShuSong-Z01} % 书宋
    \newfontfamily\kaitien{FZKai-Z03} % 楷体
    \newfontfamily\heitien{FZHei-B01} % 黑体

    \newfontfamily\titlefonten{Allura}[LetterSpace=1]

    \usepackage[fontset=none]{ctex}
    \setCJKmainfont{Source Han Serif CN}[BoldFont={Source Han Serif CN SemiBold}, ItalicFont=FZFangSong-Z02]

    \newCJKfontfamily\elsong{Source Han Serif CN ExtraLight}
    \newCJKfontfamily\lsong{Source Han Serif CN Light}
    \newCJKfontfamily\songti{Source Han Serif CN}
    \newCJKfontfamily\mediumsong{Source Han Serif CN Medium}
    \newCJKfontfamily\sbsong{Source Han Serif CN SemiBold}
    \newCJKfontfamily\bsong{Source Han Serif CN Bold}
    \newCJKfontfamily\hsong{Source Han Serif CN Heavy}

    \newCJKfontfamily\shusong{FZShuSong-Z01}[ItalicFont=FZKai-Z03] % 书宋
    \newCJKfontfamily\fangsong{FZFangSong-Z02} % 仿宋
    \newCJKfontfamily\heiti{FZHei-B01} % 黑体
    \newCJKfontfamily\kaiti{FZKai-Z03} % 楷体

    \newcommand{\titlefont}{\titlefonten\fangsong}
    \newcommand{\signfont}{\writing}

    \newcommand{\tocmain}{\bsong}
    \newcommand{\tocpart}{\sbsong\ssfont}
    \newcommand{\tocchapter}{\sbsong\chenfont}
    \newcommand{\tocchaplabel}{\itshape}
    \newcommand{\tocsection}{\songti}
    \newcommand{\tocsectlabel}{\scfont}
    \newcommand{\tocsubsection}{\tocsection}
    \newcommand{\tocsubsectlabel}{\tocsectlabel}
    \newcommand{\tocpage}{\pagenfont}

    \newcommand{\partfont}{\bsong\bsongen}
    \newcommand{\chapterfont}{\bsong\bsongen}
    \newcommand{\sectionfont}{\sbsong\sbsongen}
    \newcommand{\subsectionfont}{\songti\songtien}
    \newcommand{\pagenumberfont}{\tocpage}
    \newcommand{\headfont}{\kaiti\cpfont}
    \newcommand{\quotefont}{\itshape}
    \newcommand{\writing}{\rmfamily\sbsong}
    \newcommand{\spellfont}{\quotefont}
    \newcommand{\dotfont}{\shusong}
    \newcommand{\tempfont}{\songtien}
\else
    \usepackage{ctex}
    \newcommand{\prenotefont}{\rmfamily}
    \newcommand{\titlefont}{}
    \newcommand{\signfont}{\ttfamily}
    \newcommand{\cpfont}{\ttfamily}

    \newcommand{\tocmain}{\bfseries}
    \newcommand{\tocpart}{\bfseries}
    \newcommand{\tocchapter}{\itshape}
    \newcommand{\tocchaplabel}{\itshape}
    \newcommand{\tocsection}{\rmfamily}
    \newcommand{\tocsectlabel}{\rmfamily}
    \newcommand{\tocsubsection}{\tocsection}
    \newcommand{\tocsubsectlabel}{\tocsectlabel}
    \newcommand{\tocpage}{\ttfamily}
    \newcommand{\ssfont}{\itshape}

    \newcommand{\partfont}{\bfseries\itshape}
    \newcommand{\chapterfont}{\bfseries}
    \newcommand{\sectionfont}{\bfseries}
    \newcommand{\subsectionfont}{\sffamily}
    \newcommand{\pagenumberfont}{\tocpage}
    \newcommand{\headfont}{\ttfamily}
    \newcommand{\quotefont}{\itshape}
    \newcommand{\writing}{\rmfamily\ttfamily}
    \newcommand{\spellfont}{\quotefont}
    \newcommand{\dotfont}{\rmfamily}
    \newcommand{\tempfont}{\rmfamily}
\fi
